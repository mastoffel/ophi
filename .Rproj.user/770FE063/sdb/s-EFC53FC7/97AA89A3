{
    "contents" : "# streamline or similar plots\n\nlibrary(reshape2)\nlibrary(dplyr)\nlibrary(\"stringr\")\nsource(\"multiplot.R\")\n\n# loading study types\nstudies <- read.csv(\"studytypes.csv\", header =TRUE)\nnames(studies) <- c(\"year\", \"allo\", \"microsat\", \"snp\")\nstudies <- melt(studies, id.vars = \"year\", na.rm = TRUE)\nnames(studies) <- c(\"Year\", \"Marker\", \"Studies\")\nstudies$Studies2 <- -1 * studies$Studies\n# loading marker number\nmarker <- read.csv(\"markers.csv\", header =TRUE)\nmarker <- tbl_df(melt(marker))\nnames(marker) <- c(\"year\", \"number\")\nmarker$numberneg <- -1 * log(marker$number)\n\n\nlibrary(\"scales\")\nrevlog_trans <- function(base = exp(1)){\n    ## Define the desired transformation.\n    trans <- function(x){\n        -log(x, base)\n    }\n    ## Define the reverse of the desired transformation\n    inv <- function(x){\n        base^(-x)\n    }\n    ## Creates the transformation\n    trans_new(paste(\"revlog-\", base, sep = \"\"),\n              trans, ## The transformation function (can be defined using anonymous functions)\n              inv,  ## The reverse of the transformation\n              log_breaks(base = base), ## default way to define the scale breaks\n              domain = c(1e-100, Inf) ## The domain over which the transformation is valued\n    )\n}\n\nlibrary(ggplot2)\nlibrary(grid)\ntheme_dens <- theme_minimal() +\n    theme(strip.text.x = element_text(vjust=1,size = 18),\n          #strip.background = element_rect(fill=\"white\",linetype=\"blank\"),\n          axis.title.x = element_text(vjust= -2,size = 16),\n          axis.title.y = element_text(vjust= 3,size = 16),\n          axis.text.x = element_text(size = 12),\n          axis.text.y = element_text(size = 12),\n          plot.margin = unit(c(2,2,2,2), \"cm\"), # less margin on down side\n          # axis.line = element_line(size=1),\n          # panel.border = element_blank() ,\n          panel.grid.major = element_blank(),\n          # axis.line = element_line(color = 'black'),\n          panel.grid.minor = element_blank(),\n          # panel.border = element_rect(colour=\"black\",fill=NA,size=1),\n          legend.text = element_text(size = 12),\n          legend.title = element_text(size = 12, face = \"plain\"))\n\n\np1 <- ggplot(studies, aes(x = Year, y = Studies)) +\n    geom_bar(aes(fill = Marker), stat = \"identity\") +\n    # coord_flip() +#\"#cccccc\", \"#969696\", \"#525252\"\n    scale_fill_manual(values = c(\"#cbc9e2\", \"#9e9ac8\", \"#6a51a3\")) + ##525252 \"#f0f0f0\", \"#bdbdbd\", \"#636363\"\n    theme_dens +\n    scale_y_continuous(expand = c(0, 0)) +\n    scale_x_continuous(expand = c(0, 0)) +\n    theme(panel.border = element_blank(),\n          axis.line = element_line(color = 'black'),\n          plot.margin = unit(c(1,2,2,2), \"cm\"),\n          legend.position = \"bottom\", \n          axis.title.y = element_text(\"Number of Studies\")) \n# ggsave(\"p1.pdf\", width = 7, height = 5, units = \"in\")\n                       \np2 <- ggplot(marker, aes(year, number)) +\n    geom_boxplot(na.rm=T, fill = \"#cbc9e2\", width = 1.1) +\n    theme_dens +\n    # coord_flip() +\n    # geom_point(position = position_jitter(width = 0.2), \n    # alpha = 0.7, size = 0.5, color = \"orange\") +\n    # scale_x_discrete(labels = years) +\n    xlab(\"Year\") +\n    #scale_y_log10(limits = c(1, 10^6), breaks = c(1, 10, 100, 1000, 10000, 100000, 1000000),\n    #              expand = c(0, 0), labels = c(\"-01\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\")) +\n    scale_y_continuous(breaks = log(c(1, 10, 100, 1000, 10000, 100000, 1000000)),\n                       trans = revlog_trans(base = 2)) +\n                       #limits = c(1, 10^6), breaks = c(1, 10, 100, 1000, 10000, 100000, 1000000),\n                       # expand = c(0, 0), labels = c(\"-01\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\")) +\n    theme(panel.border = element_blank(),\n          axis.line = element_line(color = 'black'),\n          axis.line.x = element_blank(),\n          axis.text.x = element_blank(),\n          axis.ticks.x = element_blank(),\n          axis.title.x = element_blank(),\n          plot.margin = unit(c(2,2,0,2), \"cm\"))\n      \n# ggsave(\"p2.pdf\", width = 7, height = 5, units = \"in\")\np2 <- ggplot(marker, aes(year, log(number))) +\n    geom_boxplot(na.rm=T, fill = \"#cbc9e2\", width = 1.1) +\n    theme_dens +\n    # coord_flip() +\n    # geom_point(position = position_jitter(width = 0.2), \n    # alpha = 0.7, size = 0.5, color = \"orange\") +\n    # scale_x_discrete(labels = years) +\n    xlab(\"Year\") +\n    # scale_y_reverse()\n    scale_y_reverse(limits = log(c(10^6, 1)), \n                       breaks = log(c(1, 10, 100, 1000, 10000, 100000, 1000000)),\n                       labels = (c(expression(10^0), expression(10^1), expression(10^2), expression(10^3),\n                                   expression(10^4), expression(10^5), expression(10^6))),\n                       expand = c(0, 0)) +\n    theme(panel.border = element_blank(),\n          axis.line = element_line(color = 'black'),\n          axis.line.x = element_blank(),\n          axis.text.x = element_blank(),\n          axis.ticks.x = element_blank(),\n          axis.title.x = element_blank(),\n          plot.margin = unit(c(2,2,0,2), \"cm\"))\n\nmultiplot(p1, p2, cols = 1)\n",
    "created" : 1424353881635.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "1606941449",
    "id" : "97AA89A3",
    "lastKnownWriteTime" : 1424350428,
    "path" : "C:/Users/Martin/Studium/projects/tree/studies.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 15,
    "source_on_save" : false,
    "type" : "r_source"
}